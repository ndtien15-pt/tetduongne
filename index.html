<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy New Year 2026 - Nguyen Duc Tien</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@900&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
            font-family: 'Montserrat', sans-serif;
        }
        canvas {
            display: block;
            cursor: crosshair;
        }
        /* M√†n h√¨nh ch·ªù b·∫•m ƒë·ªÉ ph√°t nh·∫°c */
        #start-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 999;
            color: #fff;
            transition: opacity 0.5s;
        }
        #start-btn {
            padding: 15px 40px;
            font-size: 24px;
            background: linear-gradient(45deg, #ff00cc, #3333ff);
            border: none;
            color: white;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 0, 204, 0.5);
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            font-weight: bold;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>

<div id="start-overlay">
    <h1 style="font-family: 'Dancing Script'; margin-bottom: 20px; font-size: 3rem; color: #ffd700;">Ch√†o m·ª´ng nƒÉm m·ªõi</h1>
    <button id="start-btn">B·∫§M ƒê·ªÇ B·∫ÆT ƒê·∫¶U üéÜ</button>
</div>

<audio id="audio" loop>
    <source src="music.mp3" type="audio/mpeg">
</audio>

<canvas id="canvas"></canvas>

<script>
    // --- C·∫§U H√åNH ---
    const CONFIG = {
        fireworkChance: 0.05,  // T·ªâ l·ªá xu·∫•t hi·ªán ph√°o (c√†ng cao c√†ng d√†y)
        particleCount: 150,    // S·ªë h·∫°t m·ªói qu·∫£ ph√°o (c√†ng cao c√†ng ƒë·∫πp nh∆∞ng lag)
        gravity: 0.05,         // Tr·ªçng l·ª±c r∆°i
        friction: 0.96,        // L·ª±c c·∫£n kh√¥ng kh√≠
        textString: "HAPPY NEW YEAR\n2026", // N·ªôi dung ch·ªØ
    };

    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const audio = document.getElementById('audio');
    const startOverlay = document.getElementById('start-overlay');
    const startBtn = document.getElementById('start-btn');

    let canvasWidth = window.innerWidth;
    let canvasHeight = window.innerHeight;
    let fireworks = [];
    let particles = [];
    let isPlaying = false;

    // M√†u s·∫Øc r·ª±c r·ª°
    function randomColor() {
        const hue = Math.floor(Math.random() * 360);
        return `hsl(${hue}, 100%, 60%)`;
    }

    canvas.width = canvasWidth;
    canvas.height = canvasHeight;

    window.addEventListener('resize', () => {
        canvasWidth = window.innerWidth;
        canvasHeight = window.innerHeight;
        canvas.width = canvasWidth;
        canvas.height = canvasHeight;
    });

    // --- L·ªöP PH√ÅO HOA (V·∫≠t l√Ω x·ªãn) ---
    class Firework {
        constructor() {
            this.x = Math.random() * canvasWidth;
            this.y = canvasHeight;
            this.targetX = Math.random() * canvasWidth;
            this.targetY = Math.random() * (canvasHeight / 2); // N·ªï ·ªü n·ª≠a tr√™n m√†n h√¨nh
            this.speed = 3;
            this.angle = Math.atan2(this.targetY - this.y, this.targetX - this.x);
            this.velocities = {
                x: Math.cos(this.angle) * 15, // T·ªëc ƒë·ªô bay l√™n nhanh
                y: Math.sin(this.angle) * 15
            };
            this.hue = Math.random() * 360;
            this.brightness = Math.random() * 50 + 50;
            this.history = []; // T·∫°o ƒëu√¥i
        }

        update(index) {
            this.history.push({x: this.x, y: this.y});
            if(this.history.length > 5) this.history.shift();

            this.x += this.velocities.x * 0.5; // ƒêi·ªÅu ch·ªânh t·ªëc ƒë·ªô
            this.y += this.velocities.y * 0.5;

            // Ki·ªÉm tra ƒë·∫øn ƒë√≠ch ch∆∞a
            const dist = Math.hypot(this.x - this.targetX, this.y - this.targetY);
            if (dist < 30 || this.velocities.y >= 0) { // ƒê√£ ƒë·∫øn ƒë√≠ch ho·∫∑c b·∫Øt ƒë·∫ßu r∆°i xu·ªëng
                createParticles(this.x, this.y, this.hue);
                fireworks.splice(index, 1);
            }
        }

        draw() {
            ctx.beginPath();
            if(this.history.length > 0){
                ctx.moveTo(this.history[0].x, this.history[0].y);
                for(let i = 0; i < this.history.length; i++) {
                    ctx.lineTo(this.history[i].x, this.history[i].y);
                }
            }
            ctx.lineTo(this.x, this.y);
            ctx.strokeStyle = `hsl(${this.hue}, 100%, 50%)`;
            ctx.lineWidth = 2;
            ctx.stroke();
        }
    }

    // --- L·ªöP H·∫†T N·ªî (Hi·ªáu ·ª©ng bung t·ªèa) ---
    class Particle {
        constructor(x, y, hue) {
            this.x = x;
            this.y = y;
            this.hue = hue;
            this.angle = Math.random() * Math.PI * 2;
            // T·ªëc ƒë·ªô n·ªï m·∫°nh ng·∫´u nhi√™n
            const velocity = Math.random() * 15 + 2; 
            this.vx = Math.cos(this.angle) * velocity;
            this.vy = Math.sin(this.angle) * velocity;
            this.friction = CONFIG.friction;
            this.gravity = CONFIG.gravity;
            this.alpha = 1;
            this.decay = Math.random() * 0.015 + 0.005; // Tan bi·∫øn ch·∫≠m
        }

        update(index) {
            this.vx *= this.friction;
            this.vy *= this.friction;
            this.vy += this.gravity;
            this.x += this.vx;
            this.y += this.vy;
            this.alpha -= this.decay;

            if (this.alpha <= 0) {
                particles.splice(index, 1);
            }
        }

        draw() {
            ctx.save();
            ctx.globalAlpha = this.alpha;
            ctx.beginPath();
            ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
            ctx.fillStyle = `hsl(${this.hue}, 100%, 60%)`;
            ctx.fill();
            ctx.restore();
        }
    }

    function createParticles(x, y, hue) {
        for (let i = 0; i < CONFIG.particleCount; i++) {
            particles.push(new Particle(x, y, hue));
        }
    }

    // --- V·∫º CH·ªÆ NGH·ªÜ THU·∫¨T ---
    function drawText() {
        ctx.save();
        // C·∫•u h√¨nh ch·ªØ
        ctx.font = "bold 8vw 'Dancing Script'"; // Font th∆∞ ph√°p
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        
        // T·∫°o Gradient (M√†u c·∫ßu v·ªìng pha tr·ªôn)
        const gradient = ctx.createLinearGradient(0, 0, canvasWidth, 0);
        gradient.addColorStop(0, "#ff0000");
        gradient.addColorStop(0.2, "#ff7f00");
        gradient.addColorStop(0.4, "#ffff00");
        gradient.addColorStop(0.6, "#00ff00");
        gradient.addColorStop(0.8, "#0000ff");
        gradient.addColorStop(1, "#8b00ff");

        ctx.fillStyle = gradient;
        
        // Hi·ªáu ·ª©ng b√≥ng ƒë·ªï ph√°t s√°ng (Neon Glow)
        ctx.shadowColor = "rgba(255, 255, 255, 0.8)";
        ctx.shadowBlur = 20;

        // T√°ch d√≤ng
        const lines = CONFIG.textString.split('\n');
        const lineHeight = canvasWidth * 0.1; // Kho·∫£ng c√°ch d√≤ng theo ƒë·ªô r·ªông m√†n h√¨nh

        lines.forEach((line, index) => {
            const yOffset = (index - (lines.length - 1) / 2) * lineHeight;
            ctx.fillText(line, canvasWidth / 2, canvasHeight / 2 + yOffset);
            
            // V·∫Ω vi·ªÅn ch·ªØ cho n·ªïi
            ctx.strokeStyle = "white";
            ctx.lineWidth = 1;
            ctx.strokeText(line, canvasWidth / 2, canvasHeight / 2 + yOffset);
        });

        ctx.restore();
    }

    // --- V√íNG L·∫∂P CH√çNH ---
    function animate() {
        if (!isPlaying) return;
        requestAnimationFrame(animate);

        // T·∫°o v·ªát m·ªù (Trail effect)
        ctx.fillStyle = 'rgba(0, 0, 0, 0.2)'; // M√†u ƒëen m·ªù ƒë·ªÉ l√†m nh√≤e ƒëu√¥i
        ctx.fillRect(0, 0, canvasWidth, canvasHeight);

        // V·∫Ω ch·ªØ lu√¥n n·∫±m tr√™n n·ªÅn nh∆∞ng d∆∞·ªõi ph√°o hoa
        drawText();

        // T·∫°o ph√°o hoa ng·∫´u nhi√™n
        if (Math.random() < CONFIG.fireworkChance) {
            fireworks.push(new Firework());
        }

        fireworks.forEach((firework, index) => firework.update(index));
        fireworks.forEach(firework => firework.draw());

        particles.forEach((particle, index) => particle.update(index));
        particles.forEach(particle => particle.draw());
    }

    // --- X·ª¨ L√ù S·ª∞ KI·ªÜN ---
    startBtn.addEventListener('click', () => {
        isPlaying = true;
        startOverlay.style.opacity = '0';
        setTimeout(() => {
            startOverlay.style.display = 'none';
        }, 500);
        
        // Ph√°t nh·∫°c (n·∫øu c√≥ l·ªói file th√¨ b·ªè qua)
        audio.play().catch(e => console.log("Ch∆∞a c√≥ file nh·∫°c ho·∫∑c l·ªói ph√°t: ", e));
        
        animate();
    });

</script>
</body>
</html>